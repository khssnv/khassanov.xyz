<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Launching Robonomics collator in Docker | khassanov.xyz</title><meta name=keywords content><meta name=description content="In the official guide on collator setup it is proposed to build your own Robonomics node binary or use one from the latest release published. Docker is not proposed while the latest version at Docker Hub was a half year ago. The reason is a build issue in CI pipeline, it is already reported in Issue #232. However it is pretty easy to repeat the same steps CI does to build your own Docker image."><meta name=author content><link rel=canonical href=https://khassanov.xyz/posts/launching-robonomics-collator-in-docker/><link crossorigin=anonymous href=/assets/css/stylesheet.min.9f1d947375927e9847272b1f4e9be81336f539e513bf04d52cade31f81cad1af.css integrity="sha256-nx2Uc3WSfphHJysfTpvoEzb1OeUTvwTVLK3jH4HK0a8=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://khassanov.xyz/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://khassanov.xyz/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://khassanov.xyz/favicon-32x32.png><link rel=apple-touch-icon href=https://khassanov.xyz/apple-touch-icon.png><link rel=mask-icon href=https://khassanov.xyz/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.99.1"><link rel=alternate hreflang=en href=https://khassanov.xyz/posts/launching-robonomics-collator-in-docker/><link rel=alternate hreflang=ru href=https://khassanov.xyz/ru/posts/launching-robonomics-collator-in-docker/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Launching Robonomics collator in Docker"><meta property="og:description" content="In the official guide on collator setup it is proposed to build your own Robonomics node binary or use one from the latest release published. Docker is not proposed while the latest version at Docker Hub was a half year ago. The reason is a build issue in CI pipeline, it is already reported in Issue #232. However it is pretty easy to repeat the same steps CI does to build your own Docker image."><meta property="og:type" content="article"><meta property="og:url" content="https://khassanov.xyz/posts/launching-robonomics-collator-in-docker/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-01-09T20:43:22+03:00"><meta property="article:modified_time" content="2022-01-09T20:43:22+03:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Launching Robonomics collator in Docker"><meta name=twitter:description content="In the official guide on collator setup it is proposed to build your own Robonomics node binary or use one from the latest release published. Docker is not proposed while the latest version at Docker Hub was a half year ago. The reason is a build issue in CI pipeline, it is already reported in Issue #232. However it is pretty easy to repeat the same steps CI does to build your own Docker image."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://khassanov.xyz/posts/"},{"@type":"ListItem","position":2,"name":"Launching Robonomics collator in Docker","item":"https://khassanov.xyz/posts/launching-robonomics-collator-in-docker/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Launching Robonomics collator in Docker","name":"Launching Robonomics collator in Docker","description":"In the official guide on collator setup it is proposed to build your own Robonomics node binary or use one from the latest release published. Docker is not proposed while the latest version at Docker Hub was a half year ago. The reason is a build issue in CI pipeline, it is already reported in Issue #232. However it is pretty easy to repeat the same steps CI does to build your own Docker image.","keywords":[],"articleBody":"In the official guide on collator setup it is proposed to build your own Robonomics node binary or use one from the latest release published. Docker is not proposed while the latest version at Docker Hub was a half year ago. The reason is a build issue in CI pipeline, it is already reported in Issue #232. However it is pretty easy to repeat the same steps CI does to build your own Docker image.\ntl;dr You can use a Docker image built my me, this way you are free from building Robonomics node and an image with it by your own. Create a directory for blockchain database, setup node name and collator address (for tips) and you are ready to launch it.\nmkdir data export NODE_NAME=\"NewNode\" export ACCOUNT_ADDRESS=\"YourAccountAddress\" docker run -d \\  --name \"robonomics\" \\  -v $(pwd)/data:/data \\  khassanov/robonomics:v1.4.0 /usr/local/bin/robonomics \\  --parachain-id=2048 \\  --name=\"$NODE_NAME\" \\  --validator \\  --lighthouse-account=\"$ACCOUNT_ADDRESS\" \\  --telemetry-url=\"wss://telemetry.parachain.robonomics.network/submit/ 0\" \\  -- \\  --database=RocksDb \\  --unsafe-pruning \\  --pruning=1000 Building your own image Install Rust: https://www.rust-lang.org/tools/install.\nAdd “wasm32-unknown-unknown” target architecture and “nightly-2021-11-02” toolchain.\nrustup target add wasm32-unknown-unknown rustup toolchain install nightly-2021-11-02 Copy Robonomics node latest stable version source code.\ngit clone -b v1.4.0 https://github.com/airalab/robonomics.git Run build process. It may take a while.\ncd robonomics cargo build -j 4 --locked --release Now we can build Docker image. Fortunately, Robonomics developers made a Dockerfile.\ncd scripts/docker # go to a dir with Dockerfile cp ../../target/release/robonomics . # copy node binary file docker build -f ./Dockerfile --build-arg RUSTC_WRAPPER= --build-arg PROFILE=release -t myrobonomics/robonomics:v1.4.0 . That’s it! Now we can launch Robonomics node in Docker container. Create a directory for blockchain database, setup node name and collator address (for tips) and run a container.\nmkdir data export NODE_NAME=\"NewNode\" export ACCOUNT_ADDRESS=\"YourAccountAddress\" docker run -d \\  --name \"robonomics\" \\  -v $(pwd)/data:/data \\  myrobonomics/robonomics:v1.4.0 /usr/local/bin/robonomics \\  --parachain-id=2048 \\  --name=\"$NODE_NAME\" \\  --validator \\  --lighthouse-account=\"$ACCOUNT_ADDRESS\" \\  --telemetry-url=\"wss://telemetry.parachain.robonomics.network/submit/ 0\" \\  -- \\  --database=RocksDb \\  --unsafe-pruning \\  --pruning=1000 If you want to speed up synchronozation, you can put relaychain snapshot into data directory. You can find more details on it in the official guide. The only difference is that in our case we should unpack the archive in data/polkadot/chains/ksmcc3 directory instead of /home/robonomics/.local/share/robonomics/polkadot/chains/ksmcc3 given in the guide.\n","wordCount":"366","inLanguage":"en","datePublished":"2022-01-09T20:43:22+03:00","dateModified":"2022-01-09T20:43:22+03:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://khassanov.xyz/posts/launching-robonomics-collator-in-docker/"},"publisher":{"@type":"Organization","name":"khassanov.xyz","logo":{"@type":"ImageObject","url":"https://khassanov.xyz/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://khassanov.xyz/ accesskey=h title="khassanov.xyz (Alt + H)">khassanov.xyz</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://khassanov.xyz/ru/ title=Ru aria-label=Ru>Ru</a></li></ul></span></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Launching Robonomics collator in Docker</h1><div class=post-meta>January 9, 2022&nbsp;|&nbsp;<ul class=i18n_list>Translations:<li><a href=https://khassanov.xyz/ru/posts/launching-robonomics-collator-in-docker/>Ru</a></li></ul></div></header><div class=post-content><p>In the <a href=https://github.com/airalab/robonomics-wiki/blob/master/docs/en/collators-tips-and-tricks.md>official guide</a> on collator setup it is proposed to build your own Robonomics node binary or use one from the latest release published.
Docker is not proposed while the latest version at Docker Hub was a half year ago.
The reason is a build issue in CI pipeline, it is already reported in <a href=https://github.com/airalab/robonomics/issues/232>Issue #232</a>.
However it is pretty easy to repeat <a href=https://github.com/airalab/robonomics/blob/master/.github/workflows/release.yml#L8>the same steps CI does</a> to build your own Docker image.</p><h2 id=tldr>tl;dr<a hidden class=anchor aria-hidden=true href=#tldr>#</a></h2><p>You can use a Docker image built my me, this way you are free from building Robonomics node and an image with it by your own.
Create a directory for blockchain database, setup node name and collator address (for tips) and you are ready to launch it.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>mkdir data
</span></span><span style=display:flex><span>export NODE_NAME=&#34;NewNode&#34;
</span></span><span style=display:flex><span>export ACCOUNT_ADDRESS=&#34;YourAccountAddress&#34;
</span></span><span style=display:flex><span>docker run -d \
</span></span><span style=display:flex><span>  --name &#34;robonomics&#34; \
</span></span><span style=display:flex><span>  -v $(pwd)/data:/data \
</span></span><span style=display:flex><span>  khassanov/robonomics:v1.4.0 /usr/local/bin/robonomics \
</span></span><span style=display:flex><span>  --parachain-id=2048 \
</span></span><span style=display:flex><span>  --name=&#34;$NODE_NAME&#34; \
</span></span><span style=display:flex><span>  --validator \
</span></span><span style=display:flex><span>  --lighthouse-account=&#34;$ACCOUNT_ADDRESS&#34; \
</span></span><span style=display:flex><span>  --telemetry-url=&#34;wss://telemetry.parachain.robonomics.network/submit/ 0&#34; \
</span></span><span style=display:flex><span>  -- \
</span></span><span style=display:flex><span>  --database=RocksDb \
</span></span><span style=display:flex><span>  --unsafe-pruning \
</span></span><span style=display:flex><span>  --pruning=1000
</span></span></code></pre></div><h2 id=building-your-own-image>Building your own image<a hidden class=anchor aria-hidden=true href=#building-your-own-image>#</a></h2><p>Install Rust: <a href=https://www.rust-lang.org/tools/install>https://www.rust-lang.org/tools/install</a>.</p><p>Add &ldquo;wasm32-unknown-unknown&rdquo; target architecture and &ldquo;nightly-2021-11-02&rdquo; toolchain.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>rustup target add wasm32-unknown-unknown
</span></span><span style=display:flex><span>rustup toolchain install nightly-2021-11-02
</span></span></code></pre></div><p>Copy Robonomics node latest stable version source code.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>git clone -b v1.4.0 https://github.com/airalab/robonomics.git
</span></span></code></pre></div><p>Run build process.
It may take a while.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>cd robonomics
</span></span><span style=display:flex><span>cargo build -j 4 --locked --release
</span></span></code></pre></div><p>Now we can build Docker image.
Fortunately, Robonomics developers made a Dockerfile.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>cd scripts/docker # go to a dir with Dockerfile
</span></span><span style=display:flex><span>cp ../../target/release/robonomics . # copy node binary file
</span></span><span style=display:flex><span>docker build -f ./Dockerfile --build-arg RUSTC_WRAPPER= --build-arg PROFILE=release -t myrobonomics/robonomics:v1.4.0 .
</span></span></code></pre></div><p>That&rsquo;s it!
Now we can launch Robonomics node in Docker container.
Create a directory for blockchain database, setup node name and collator address (for tips) and run a container.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>mkdir data
</span></span><span style=display:flex><span>export NODE_NAME=&#34;NewNode&#34;
</span></span><span style=display:flex><span>export ACCOUNT_ADDRESS=&#34;YourAccountAddress&#34;
</span></span><span style=display:flex><span>docker run -d \
</span></span><span style=display:flex><span>  --name &#34;robonomics&#34; \
</span></span><span style=display:flex><span>  -v $(pwd)/data:/data \
</span></span><span style=display:flex><span>  myrobonomics/robonomics:v1.4.0 /usr/local/bin/robonomics \
</span></span><span style=display:flex><span>  --parachain-id=2048 \
</span></span><span style=display:flex><span>  --name=&#34;$NODE_NAME&#34; \
</span></span><span style=display:flex><span>  --validator \
</span></span><span style=display:flex><span>  --lighthouse-account=&#34;$ACCOUNT_ADDRESS&#34; \
</span></span><span style=display:flex><span>  --telemetry-url=&#34;wss://telemetry.parachain.robonomics.network/submit/ 0&#34; \
</span></span><span style=display:flex><span>  -- \
</span></span><span style=display:flex><span>  --database=RocksDb \
</span></span><span style=display:flex><span>  --unsafe-pruning \
</span></span><span style=display:flex><span>  --pruning=1000
</span></span></code></pre></div><p>If you want to speed up synchronozation, you can put relaychain snapshot into <code>data</code> directory.
You can find more details on it in the <a href=https://github.com/airalab/robonomics-wiki/blob/master/docs/en/how-to-launch-the-robonomics-collator.md#using-kusama-snapshot-for-making-syncronization-faster>official guide</a>.
The only difference is that in our case we should unpack the archive in <code>data/polkadot/chains/ksmcc3</code> directory instead of <code>/home/robonomics/.local/share/robonomics/polkadot/chains/ksmcc3</code> given in the guide.</p></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://khassanov.xyz/>khassanov.xyz</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>